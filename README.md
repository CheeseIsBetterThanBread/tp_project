Технологии программирования, Ким Б05-327, весна 2024

Как собрать проект, находясь в его корневой директории:

./build.sh

Исполняемый файл будет лежать в директории bin проекта. Для его запуска можно воспользоваться командой

./run.sh

Чтобы пересобрать проект, достаточно воспользоваться командой

./rebuild.sh

Чтобы собрать проект для дебага, можно прописать

./build.sh --test

Для пересборки проекта для дебага нужно добавить тот же флаг у rebuild

./rebuild.sh --test

Скомпилированные тесты тоже будут лежать в директории bin. Для запуска можно использовать

./run_tests.sh

[Class diagram](./class_uml.jpg?raw=true)

Battlefield хранит локальную копию полей игроков.
Каждая ячейка поля игрока содержит одно из чисел:
1) 0 - клетка пустая
2) number - в этой клетке стоит еще живая ячейка корабля под номером number
3) -number - в этой клетке стоит подбитая ячейка корабля под номером number

Каждая ячейка поля противника содержит одно из чисел:
1) INF - пустая клетка, в которую еще не стреляли
2) 0 - пустая клетка, по которой пытались попасть
3) +/- number - аналогично полю игрока

Command - абстрактный класс, соответствует действиям игрока. Его наследники взаимодействуют напрямую с Battlefield.

Observable - наблюдаемый класс, о каких-либо изменениях он уведомляет наблюдателя (Observer).

RemoteServer - наследник Observable. Собирает информацию от обоих игроков и хранит ее у себя.
Пока не реализован.

Interactor - наблюдатель за RemoteServer. Все изменения копирует в локальную копию (Battlefield).
Кроме того, вызывает команды. Если запрос корректен, отправляет изменения в RemoteServer.

Adapter - на данный момент некоторое приближение интерфейса пользователя.
Его методы проверяют введенные данные на корректность, а потом отправляют запрос к Interactor.

[Use case diagram](./use_case_uml.jpg?raw=true)

Игрок может пользоваться только двумя методами - AddShip и FireAt.
Первый из них вызывается 10 раз в начале игры и больше вызываться не может.
Второй будет вызываться на каждом ходе игрока.
Информация от обоих запросов будет сохраняться объектом RemoteServer.
